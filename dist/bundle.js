({903:function(){var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}u((r=r.apply(t,e||[])).next())}))};const e=/[A-Z]{3}[A-Z]* \d+[A-Z]? - .+/g,n=/(?:(?<sectionType>[A-Z][a-z]+)\n)?(?<weekdays>(?:[A-Z][a-z])+)\s+(?<startTime>\d\d?:\d\d(?:AM|PM))\s+-\s+(?<endTime>\d\d?:\d\d(?:AM|PM))\n(?<location>.+)\n(?<professors>\D+)(?<dtstart>[\d/]+)\s+-\s+(?<dtend>[\d/]+)/g,r=/(?<hours>\d+)(?::)(?<minutes>\d+)(?<isAfterNoon>PM)?/,o=/(^\s+)/gm,s=/(\s+$)/gm;function i(t,e,n,r,o,s,i,u,c){let l=n.match(/../g).toString(),d=a(u,r);!function(t,e){for(e=e.toLowerCase();!e.includes(t.toUTCString().slice(0,2).toLowerCase());)t.setUTCDate(t.getUTCDate()+1)}(d,l);let T=a(u,o);T.setUTCDate(d.getUTCDate());let f=a(c,o);return f.setUTCHours(0,0,0,0),{summary:`${t} (${e})`,dtstart:d,dtend:T,location:s,description:"Professors: "+i.replace(/\n/gm," "),exclude:[],rrule:{byDay:l,until:f}}}function a(t,e){let n=r.exec(e).groups;if(!n)throw new Error(`Incorrect time format: ${e}`);let o=new Date(t),s=parseInt(n.hours),i=0;return n.isAfterNoon&&s<12?i=12:n.isAfterNoon||12!=s||(i=-12),o.setUTCHours(s+i),o.setUTCMinutes(parseInt(n.minutes)),o}function u(t,e){let n=t.dtstart.getUTCHours(),r=t.dtstart.getUTCMinutes(),o=[];for(let s of e){if(!t.rrule.byDay.toLowerCase().includes(s.toUTCString().slice(0,2).toLowerCase()))continue;let e=new Date(s.getTime());e.setUTCHours(n),e.setUTCMinutes(r),o.push(e)}t.exclude=o}function c(t){return t.replace(o,"").replace(s,"").replace(/\n+/gm,"\n")}function l(t,e){let n,r=[];for(;null!==(n=e.exec(t));)r.push(n);return r}window.convertToIcal=function(r,o,s){return t(this,void 0,void 0,(function*(){if(!(r=r.trim()))throw new Error("You inputted an empty schedule.");let a=function(t){const r=(t=c(t)).match(e);if(!r)throw new Error("Couldn't find any class sections in your schedule. Please, check your schedule or contact my author.");const o=t.split(e);o.shift();let s=[];for(let t=0;t<r.length;t++){let e=o[t];if(e.includes("Dropped")||e.includes("Withdrawn"))continue;let a,u=l(e,n),c="";for(let e of u){let n=e.groups;(a=n.sectionType)&&(c=a),s.push(i(r[t],c,n.weekdays,n.startTime,n.endTime,n.location,n.professors,n.dtstart,n.dtend))}}return s}(r);if(!a)throw new Error("Couldn't find any class sections in your schedule. Please, check your schedule or contact my author.");let T,f=a[0].dtstart,D=f.getUTCFullYear(),m=function(t){let e=t.getUTCMonth();return 7<=e&&e<=9?"Fall":0<=e&&e<=2?"Spring":"Summer"}(f);T=o?yield function(e,n){return t(this,void 0,void 0,(function*(){let t;try{t=yield(yield fetch(`https://calendar.ucf.edu/json/${e}/${n}`)).json()}catch(t){throw console.log(t),new Error("Couldn't connect to calendar.ucf.edu to get no-school events. Either check your internet connection and try again or uncheck 'I am a UCF student' tickbox.")}let r=[];for(let e of t.terms[0].events)if(e.tags&&e.tags.includes("no-classes")&&e.dtstart&&e.summary){let t,n=new Date(e.dtstart);e.dtend?t=new Date(e.dtend):(t=new Date(n.getTime()),t.setUTCDate(t.getUTCDate()+1));let o=e.description||"";o=o.trim(),r.push({summary:e.summary.trim(),dtstart:n,dtend:t,description:o})}return r}))}(D,m):[];let h=function(t){let e=[];for(let n of t){let t=(n.dtend.getTime()-n.dtstart.getTime())/864e5;if(t>1)for(let r=0;r<t+1;r++){let t=new Date(n.dtstart);t.setUTCDate(t.getUTCDate()+r),e.push(t)}else e.push(n.dtstart)}return console.log(e.map((t=>t.toUTCString()))),e}(T);for(let t of a)u(t,h);return function(t,e,n,r){let o=new d(e),s=`;TZID=${e}`,i=o.toDatetime(new Date)+"Z",a=`\n    BEGIN:VCALENDAR\n    SUMMARY:${t}\n    PRODID:-//Ovsyanka83//UnischedulerTS//EN\n    VERSION:2.0\n    DTSTAMP:${i}\n    CREATED:${i}\n    LAST-MODIFIED:${i}\n    `;for(let t of n)a+=`\n        BEGIN:VEVENT\n        SUMMARY:${t.summary}\n        DESCRIPTION:${t.description}\n        LOCATION:${t.location}\n        DTSTART;VALUE=DATE-TIME${s}:${o.toDatetime(t.dtstart)}\n        DTEND;VALUE=DATE-TIME${s}:${o.toDatetime(t.dtend)}\n        RRULE:FREQ=WEEKLY;BYDAY=${t.rrule.byDay};INTERVAL=1;UNTIL=${o.toDatetime(t.rrule.until)}Z\n        EXDATE:${o.toExdateList(t.exclude)}\n        END:VEVENT\n        `;for(let t of r)a+=`\n        BEGIN:VEVENT\n        SUMMARY:${t.summary}\n        DESCRIPTION:${t.description}\n        DTSTART;VALUE=DATE${s}:${o.toDate(t.dtstart)}\n        DTEND;VALUE=DATE${s}:${o.toDate(t.dtend)}\n        END:VEVENT\n        `;return a+="\nEND:VCALENDAR",o.normalize(a)}(`Classes ${m} ${D}`,s,a,T)}))};class d{constructor(t){this.timezone=t}toDatetime(t){return`${this.toDate(t)}T${this.toTime(t)}`}toDate(t){return t.getUTCFullYear()+T(t.getUTCMonth()+1)+T(t.getUTCDate())}toTime(t){return T(t.getUTCHours())+T(t.getUTCMinutes())+T(t.getUTCSeconds())}toExdateList(t){return t.map(this.toDatetime,this).join(",")}normalize(t){return null===(e=c(t).match(/[^\r\n]+/g))||void 0===e?void 0:e.map(f).join("\r\n");var e}}function T(t){return t<10?"0"+t:""+t}function f(t){const e=[];let n=75;for(;t.length>n;)e.push(t.slice(0,n)),t=t.slice(n),n=74;return e.push(t),e.join("\r\n ")}}})[903]();
//# sourceMappingURL=bundle.js.map