({903:function(){var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{a(r.next(t))}catch(t){s(t)}}function u(t){try{a(r.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}a((r=r.apply(t,e||[])).next())}))};const e=/[A-Z]{3}[A-Z]* \d+[A-Z]? - .+/g,n=/(?:(?<sectionType>[A-Z][a-z]+)\n)?(?<weekdays>(?:[A-Z][a-z])+)\s+(?<startTime>\d\d?:\d\d(?:AM|PM))\s+-\s+(?<endTime>\d\d?:\d\d(?:AM|PM))\n(?<location>.+)\n(?<professors>\D+)(?<dtstart>[\d/]+)\s+-\s+(?<dtend>[\d/]+)/g,r=/(^\s+)/gm,o=/(\s+$)/gm,s=/\n+/gm,i=/(?<hours>\d+)(?::)(?<minutes>\d+)(?<isAfterNoon>PM)?/;class u extends Error{constructor(t){super(t),Object.setPrototypeOf(this,u.prototype)}}function a(t,e,n,r,o,s,i,u,a){let c=n.match(/../g).toString(),d=l(u,r);!function(t,e){for(e=e.toLowerCase();!e.includes(t.toUTCString().slice(0,2).toLowerCase());)t.setUTCDate(t.getUTCDate()+1)}(d,c);let f=l(u,o);f.setUTCDate(d.getUTCDate());let T=l(a,o);return T.setUTCHours(0,0,0,0),{summary:`${t} (${e})`,start:d,end:f,location:s,description:"Professors: "+i.replace(/\n/gm," "),rrule:{freq:"WEEKLY",byDay:c,until:T}}}function l(t,e){let n=i.exec(e).groups;if(!n)throw new u("TIMEINFO ERROR");let r=new Date(t),o=parseInt(n.hours),s=0;return n.isAfterNoon&&o<12?s=12:n.isAfterNoon||12!=o||(s=-12),r.setUTCHours(o+s),r.setUTCMinutes(parseInt(n.minutes)),r}function c(t,e){let n=t.start.getUTCHours(),r=t.start.getUTCMinutes(),o=[];for(let s of e){if(!t.rrule.byDay.toLowerCase().includes(s.toUTCString().slice(0,2).toLowerCase()))continue;let e=new Date(s.getTime());e.setUTCHours(n),e.setUTCMinutes(r),o.push(e)}t.rrule.exclude=o}function d(t){return t.replace(r,"").replace(o,"").replace(s,"\n")}function f(t,e){let n,r=[];for(;null!==(n=e.exec(t));)r.push(n);return r}window.convertToIcal=function(r,o,s){return t(this,void 0,void 0,(function*(){if(!(r=r.trim()))throw new u("You inputted an empty schedule.");let i=function(t){const r=(t=d(t)).match(e);if(!r)throw new u("Couldn't find any class sections in your schedule. Please, check your schedule or contact my author.");const o=t.split(e);o.shift();let s=[];for(let t=0;t<r.length;t++){let e=o[t];if(e.includes("Dropped")||e.includes("Withdrawn"))continue;let i,u=f(e,n),l="";for(let e of u){let n=e.groups;(i=n.sectionType)&&(l=i),s.push(a(r[t],l,n.weekdays,n.startTime,n.endTime,n.location,n.professors,n.dtstart,n.dtend))}}return s}(r);if(!i)throw new u("Couldn't find any class sections in your schedule. Please, check your schedule or contact my author.");let l,h=i[0].start,m=h.getUTCFullYear(),D=function(t){let e=t.getUTCMonth();return 7<=e&&e<=9?"Fall":0<=e&&e<=2?"Spring":"Summer"}(h);l=o?yield function(e,n){return t(this,void 0,void 0,(function*(){const t=`https://calendar.ucf.edu/${e}/${n}/no-classes/`;let r,o;try{r=yield fetch(t),o=(new DOMParser).parseFromString(yield r.text(),"text/html")}catch(t){throw new u("Couldn't connect to calendar.ucf.edu to get no-school events. Either check your internet connection and try again or uncheck 'I am a UCF student' tickbox.")}let s,i,a,l,c,d,f=o.querySelectorAll("tr.vevent"),T=[];for(let t of f){s=i=a=l=c=d=null;for(let e of t.querySelectorAll("abbr"))e.className.includes("dtstart")?a=e.title:e.className.includes("dtend")&&(l=e.title);if(d=t.querySelector("span.summary").textContent,!a||!d)continue;s=new Date(a);let e=t.querySelector("div.more-details");e&&(c=e.textContent.trim()),l?i=new Date(l):(i=new Date(s.getTime()),i.setUTCDate(i.getUTCDate()+1)),T.push({summary:d,start:s,end:i,description:c||""})}return T}))}(m,D):[];let E=function(t){let e=[];for(let n of t){let t=(n.end.getTime()-n.start.getTime())/864e5;if(t>1)for(let r=0;r<t+1;r++){let t=new Date(n.start);t.setUTCDate(t.getUTCDate()+r),e.push(t)}else e.push(n.start)}return console.log(e.map((t=>t.toUTCString()))),e}(l);for(let t of i)c(t,E);return function(t,e,n,r){let o=`BEGIN:VCALENDAR\nSUMMARY:${t}\nTIMEZONE:${e}\n`,s=new T(e),i=`;TZID=${e}`;for(let t of n)o+=`\n        BEGIN:VEVENT\n        SUMMARY:${t.summary}\n        DESCRIPTION:${t.description}\n        LOCATION:${t.location}\n        DTSTART;VALUE=DATE-TIME${i}:${s.toDatetime(t.start)}\n        DTEND;VALUE=DATE-TIME${i}:${s.toDatetime(t.end)}\n        RRULE:FREQ=WEEKLY;BYDAY=${t.rrule.byDay};INTERVAL=1;UNTIL=${s.toDatetime(t.rrule.until)}Z\n        EXDATE:${s.toExdateList(t.rrule.exclude)}\n        END:VEVENT\n        `;for(let t of r)o+=`\n        BEGIN:VEVENT\n        SUMMARY:${t.summary}\n        DESCRIPTION:${t.description}\n        DTSTART;VALUE=DATE${i}:${s.toDate(t.start)}\n        DTEND;VALUE=DATE${i}:${s.toDate(t.end)}\n        END:VEVENT\n        `;return o+="\nEND:VCALENDAR",s.normalize(o)}(`Classes ${D} ${m}`,s,i,l)}))};class T{constructor(t){this.timezone=t}toDatetime(t){return`${this.toDate(t)}T${this.toTime(t)}`}toDate(t){return t.getUTCFullYear()+h(t.getUTCMonth()+1)+h(t.getUTCDate())}toTime(t){return h(t.getUTCHours())+h(t.getUTCMinutes())+h(t.getUTCSeconds())}toExdateList(t){return t.map(this.toDatetime,this).join(",")}normalize(t){return null===(e=d(t).match(/[^\r\n]+/g))||void 0===e?void 0:e.map(m).join("\r\n");var e}}function h(t){return t<10?"0"+t:""+t}function m(t){const e=[];let n=75;for(;t.length>n;)e.push(t.slice(0,n)),t=t.slice(n),n=74;return e.push(t),e.join("\r\n ")}}})[903]();
//# sourceMappingURL=bundle.js.map